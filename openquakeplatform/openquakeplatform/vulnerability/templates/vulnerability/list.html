{% extends "site_base.html" %}
{% load i18n %}

{% block title %} {% trans page_title %} {% endblock title %}
{% block indexclass %} class="here" {% endblock indexclass %}
{% block body_class %}bodyclass{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{{ STATIC_URL }}css/d3.css" />
<link rel="stylesheet" href="{{ STATIC_URL }}vulnerability/css/vulnerability.css" />
<script src="{{ STATIC_URL }}js/d3.js"></script>
<script src="{{ STATIC_URL }}js/json2.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="{{ STATIC_URL }}js/js.cookie.js"></script>
<script src="{{ STATIC_URL }}js/utility.js"></script>
<script type="text/javascript">
{% include "vulnerability/list_head_incl.js" %}
</script>
<style>
body.bodyclass { height: 100%; }

div.liquid_content {
    position: relative;
    width: 100%;
    background-color: #ffddff;
}

div.list_func_container {
    position: relative;
    display: inline;
    float: left;
    width: 25%;
    background-color: #f3f0ef;
    overflow: auto;
    border: 0px solid grey;
    border-left: 0px;
}

div.preview_container {
    position: relative;
    display: inline;
    float: left;
    width: 75%;
    background-color: #ffffff;
    border: 0px solid grey;
    border-right: 0px;
}

div.preview {
    border: 1px solid gray;
    border-right:  0px;
    border-bottom: 0px;
    overflow: auto;
}

div.list_func {
    padding: 8px;
    border-top: 1px solid gray;
}

div.list_entry {
    color: #1b75a7;
    cursor: pointer;
}

div.list_entry:hover {
    text-decoration: underline;
}

div.list_entry_selected {
    background-color: white;
    color: black;
}

div.list_entry_selected:hover {
    background-color: white;
    color: black;
}

ul.vuln_menu
{
    width:100%;
    margin:0;
    list-style-type:none;
    background-color: #f3f0ef;
    background-position: left bottom;
    border-bottom: 1px solid #1b75a7;
}

li.vuln_menu {
    display:inline-block;
    color: black;
    padding: 0 8px 0 8px;
    font-size: 14px;
    line-height: 32px;
    vertical-align: bottom;
}

li.vuln_menu_selected {
    background-color: #ffffff;
    border: 1px solid #1b75a7;
    line-height: 30px;
    border-bottom: 1px solid white;
}

li.vuln_menu_title {
    background-color: rgb(27, 117, 167);
    color: white;
    font-size: 16px;
    font-weight: bold;
}

a.vuln_menu
{
    width:6em;
    color: #1b75a7;
    padding:0.2em 0.6em;
}

a.vuln_menu:hover {
    text-decoration:underline;
}

div.filters {
    padding: 4px;
    min-width: 900px;
}

div.filters form {
    margin: 0px;
}

input, textarea, .uneditable-input {
    width: 150px;
}

select {
    width: auto;
}

div.filters form table {
  margin: auto;
}

div.filters form table td {
  text-align: right;
  padding: 4px;
}

/* messages */

ul.messagelist {
    margin: 0;
    padding: 0;
}

ul.messagelist li {
    background: url("/static/admin/img/icon_success.gif") no-repeat scroll 5px 0.3em #ffc;
    border-bottom: 1px solid #ddd;
    color: #666;
    display: block;
    font-size: 12px;
    margin: 0;
    padding: 4px 5px 4px 25px;
    list-style-type: square;
    line-height: 18px;
}

#permalink {
    position: relative;
    left: 12px;
    bottom: 24px;
}

</style>
{{ block.super }}
{% endblock %}

{% block middle %}
  <div id="oq-page-middle">
    <div>
    {% block messages %}
        {% if messages %}
      <div><ul class="messagelist">
            {% for message in messages %}
        <li {%     if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
            {% endfor %}
        </ul>
      </div>
        {% endif %}
    {% endblock messages %}
    </div>
    <div class="main">
      <ul class="vuln_menu">
        <li class="vuln_menu vuln_menu_title">List of curves</li>
        {% for toa_key,toa_value in types_of_assessment.items %}{% if toa_key == type_of_assessment %}<li class="vuln_menu vuln_menu_selected">{{toa_value}}</li>{% else %}<li class="vuln_menu"><a class="vuln_menu" href="?type_of_assessment={{toa_key}}">{{toa_value}}</a></li>{% endif %}{% endfor %}
        <li class="vuln_menu" style="float: right;">
          <form action="/admin/vulnerability/generalinformation/add/" method="GET" style="margin: 0;">
            <button type="submit" value="New function" title="Create a new function."><span class="icon-pencil" aria-hidden="true"></span> New function</button>
          </form>
        </li>
        <li class="vuln_menu" style="float: right;">
          <form action="/admin/vulnerability/generalinformation/add/" method="post" style="margin: 0;">
            <input type="hidden" name="type_of_assessment" value="{{ type_of_assessment }}">
            <input type="hidden" id="curve_id" name="curve_id" value="{{ curve_id }}">

            <button type="submit" value="Cart ({{ cart_numb }})" title="Collection of curves to export as a single NRML file." onclick="this.form.action = '/vulnerability/cart';"><span class="icon-shopping-cart" aria-hidden="true"></span> Cart ({{ cart_numb }})</button>
          </form>
        </li>
      </ul>
      <div class="filters">
        <form name="filter" action="list?type_of_assessment={{ type_of_assessment }}" method="post">
          <table>
            <tr>
            {% for item in form1 %}
              <td>
                {{ item.field.label }}:
                {{ item.field }}
              </td>
            {% endfor %}
            </tr>
            <tr>
            {% for item in form2 %}
              <td>
                {{ item.field.label }}:
                {{ item.field }}
              </td>
            {% endfor %}
            </tr>
            <tr>
            {% for item in form3 %}
              <td>
                {{ item.field.label }}{% if item.field.label %}:{% endif %}
                {{ item.field }}
              </td>
            {% endfor %}
              <td>
                <button type="submit" value="Filter"><span class="icon-filter" aria-hidden="true"></span> Filter</button>
              </td>
            </tr>
          </table>
          {% csrf_token %}
        </form>
      </div>
      <div class="liquid_content">
        <div id="list_func_container" class="list_func_container">
          <div id="list_func" class="list_func">
            <!-- Geninfo  -->
            {% for gi_cur in geninfo %}
            <div id="list_entry-{{ gi_cur.id }}" class="list_entry" onclick="entry_select({{ gi_cur.id }});">{{ gi_cur }}</div>
            {% endfor %}
          </div>
        </div>
      <div id="preview_container" class="preview_container">
        <div id="preview" class="preview">
          <p id="first_step" style="font-size: 24px; text-align: center; margin-top: 100px;">Select a list item on the left.</p>
          <div id="actions" style="display: none;">
            <form action="" method="post" style="margin: 8px;">
            <input id="from" type="hidden" name="from"/>
            <button type="submit" id="more_details" type="submit" value="More details" value="More details" name="_show" onclick="return more_details_cb(this);"><span class="icon-search" aria-hidden="true"></span> More details</button>
            </form>
           </div>
          <div id="functionContainer" class="main_app">
          </div>
        </div>
          <a id="permalink" href="">Permalink</a>
      </div>
    </div> <!-- div class="main" -->
  </div>
  <script type="text/javascript">
{% include "vulnerability/list_incl.js" %}
    </script>

{% endblock %}
