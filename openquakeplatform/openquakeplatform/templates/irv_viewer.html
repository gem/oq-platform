<!--
Copyright (c) 2014, GEM Foundation.

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as
published by the Free Software Foundation, either version 3 of the
License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with this program.  If not, see <https://www.gnu.org/licenses/agpl.html>.
-->
{% extends "data_viewer_base.html" %}

{% block title %}
IRV - {{block.super}}
{% endblock %}

{% block map_tools %}
{{block.super}}

<div id="projectDefWeightDialog" title="Project Definition">
</div>

{% endblock %}

{% block body_outer %}
{{block.super}}
<link rel="stylesheet" href="{{ STATIC_URL }}css/irv_viewer.css" />
{% endblock %}


{% block middle %}
{{block.super}}
<div id="cover"></div>
<div ng-app="irvApp">
  <div id="ajaxErrorDialog" title="Error" style="overflow: hidden;"></div>
  <div id="successDialog" title="Success" style="overflow: hidden;"></div>
  <div id="saveStateDialog" title="Save Project Definition" style="overflow: hidden;">
    <p>Please provide a title for the new project definition:</p></br>
    <div id="inputName"></div>
    <div id="licenseName"></div>
    <div id="licenseURL"></div>
    <br><br>
    <input id="checkboxPD" type="checkbox" name="license">I confirm that I have read and agree to the license conditions.<br><br>
    <button id="submitPD" type="button" class="btn btn-primary">Save</button>
    <div id="saveState-spinner" >Saving ...<img src="{{ STATIC_URL }}img/ajax-loader.gif" /></div>
  </div>

  <div
    id="loadProjectDialog"
    ng-controller="HazardMapDropdown"
    title="Load Project Definition"
    style="overflow: hidden;">

      </br>Load Integrated Risk Project:</br>
      Filter </br><input type="text" ng-model="search">
      </br><br>
      <select size="5" id="layer-list" ng-model="selected_map" ng-options="map.name for map in maps | filter:search | orderBy:'name'">
        <option></option>
      </select>
      </br>
      <input type="button" id="loadProjectBtn" class="btn btn-primary" value="Load Project">
  </div>

  <!-- Theme tags-->
  <div id="themeTabs">
    <ul>
      <li id="1" ><a href="#project-def">Project Definition</a></li>
      <li id="2"><a href="#iri-chart">IRI Chart</a></li>
      <li id="3"><a href="#cat-chart">SVI Theme Chart</a></li>
      <li id="4"><a href="#primary-tab">Primary Indicator Chart</a></li>

    </ul>

    <div id="project-def">
      <button id="saveBtn" class="btn btn-blue">Save Project Definition</button>
      <div id="projectDef-tree"></div>
      <div id="projectDefDialog" title="Project Definition">
        <div id="projectDef-spinner" ></div>
      </div>
    </div>
    <div id="iri-chart">
      <div id="iri-spinner" >Loading ...<img id="download-button-spinner" src="{{ STATIC_URL }}img/ajax-loader.gif" /></div>
    </div>
    <div id="cat-chart"></div>
    <div id="primary-tab">
      <div>
        <p>
          <select id="primary_indicator" name="primary_indicator"></select>
        </p>
      </div>
    </div>


  </div>
</div>

{% endblock middle %}
{% block extra_script %}
    {{block.super}}
    <script src="{{ STATIC_URL }}js/irv_viewer.js"></script>
    <script src="{{ STATIC_URL }}js/irv_viewer_d3_tree.js"></script>
    <script src="{{ STATIC_URL }}js/irv_viewer_PCP_IRI.js"></script>
    <script src="{{ STATIC_URL }}js/irv_viewer_PCP_theme.js"></script>
    <script src="{{ STATIC_URL }}js/irv_viewer_PCP_primary.js"></script>
    <script src="{{ STATIC_URL }}js/irvController.js"></script>
    <script>
        help=document.getElementById("help_url");
        if(typeof help !== "undefined") { help.href+='/irv/'; }
    </script>
{% endblock extra_script %}
