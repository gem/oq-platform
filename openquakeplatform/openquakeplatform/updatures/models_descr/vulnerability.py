# Copyright (c) 2014-2015, GEM Foundation.
#
# This program is free software: you can redistribute it and/or modify
# under the terms of the GNU Affero General Public License as published
# by the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU Affero General Public License
# along with this program.  If not, see <http://www.gnu.org/licenses/>.

from openquakeplatform.updatures.classes import (ModelRefs, ModelDescription,
                                                 MODELS_DESCR)
 
# vulnerability models
MODELS_DESCR['vulnerability.qrsempirical'] = ModelDescription(
    'vulnerability.qrsempirical',
    None,
    {'owner': ModelRefs('auth.user', False),
     'fragility_func': ModelRefs('vulnerability.fragilityfunc', False),
     'vulnerability_func': ModelRefs('vulnerability.vulnerabilityfunc', False),
     },
    group="vulnerability.generalinformation")

MODELS_DESCR['vulnerability.qrsanalytical'] = ModelDescription(
    'vulnerability.qrsanalytical',
    None,
    {'owner': ModelRefs('auth.user', False),
     'fragility_func':     ModelRefs('vulnerability.fragilityfunc', False),
     'vulnerability_func': ModelRefs('vulnerability.vulnerabilityfunc', False),
     },
    group="vulnerability.generalinformation")

MODELS_DESCR['vulnerability.statmodel'] = ModelDescription(
    'vulnerability.statmodel',
    None,
    {'owner': ModelRefs('auth.user', False),})

MODELS_DESCR['vulnerability.statmodelfittingmethod'] = ModelDescription(
    'vulnerability.statmodelfittingmethod',
    None,
    {'owner': ModelRefs('auth.user', False),})

MODELS_DESCR['vulnerability.modelfittingmethodassumption'] = ModelDescription(
    'vulnerability.modelfittingmethodassumption',
    None,
    {'owner': ModelRefs('auth.user', False),})

MODELS_DESCR['vulnerability.fitassessmentgoodness'] = ModelDescription(
    'vulnerability.fitassessmentgoodness',
    None,
    {'owner': ModelRefs('auth.user', False),})

MODELS_DESCR['vulnerability.procconstrint'] = ModelDescription(
    'vulnerability.procconstrint',
    None,
    {'owner': ModelRefs('auth.user', False),})

MODELS_DESCR['vulnerability.statisticalinformation'] = ModelDescription(
    'vulnerability.statisticalinformation',
    None,
    {'owner': ModelRefs('auth.user', False),
     'fragility_func':     ModelRefs('vulnerability.fragilityfunc', False),
     'vulnerability_func': ModelRefs('vulnerability.vulnerabilityfunc', False),
     },
    group="vulnerability.generalinformation")

MODELS_DESCR['vulnerability.empiricalmodelinfo'] = ModelDescription(
    'vulnerability.empiricalmodelinfo',
    None,
    {'owner': ModelRefs('auth.user', False),
     'fragility_func':     ModelRefs('vulnerability.fragilityfunc', False),
     'vulnerability_func': ModelRefs('vulnerability.vulnerabilityfunc', False),
     },
    group="vulnerability.generalinformation")

MODELS_DESCR['vulnerability.analysistype'] = ModelDescription(
    'vulnerability.analysistype',
    None,
    {'owner': ModelRefs('auth.user', False),})

MODELS_DESCR['vulnerability.analyticalmodelinfo'] = ModelDescription(
    'vulnerability.analyticalmodelinfo',
    None,
    {'owner': ModelRefs('auth.user', False),
     'fragility_func':     ModelRefs('vulnerability.fragilityfunc', False),
     'vulnerability_func': ModelRefs('vulnerability.vulnerabilityfunc', False)},
    group="vulnerability.generalinformation")

MODELS_DESCR['vulnerability.cc_analysistype'] = ModelDescription(
    'vulnerability.cc_analysistype',
    None,
    {'owner': ModelRefs('auth.user', False),})

MODELS_DESCR['vulnerability.cc_analyticalmodelinfo'] = ModelDescription(
    'vulnerability.cc_analyticalmodelinfo',
    None,
    {'owner': ModelRefs('auth.user', False),
     'capacity_curve_func': ModelRefs('vulnerability.capacitycurvefunc', False),
     },
    group="vulnerability.generalinformation")

MODELS_DESCR['vulnerability.country'] = ModelDescription(
    'vulnerability.country',
    None,
    {}, pk_natural=True,
    )

MODELS_DESCR['vulnerability.geoapplicability'] = ModelDescription(
    'vulnerability.geoapplicability',
    None,
    {'owner': ModelRefs('auth.user', False),
     'general_information': ModelRefs('vulnerability.generalinformation',
                                      False),
     'countries':           ModelRefs('vulnerability.country', True)},
    group="vulnerability.generalinformation")

MODELS_DESCR['vulnerability.taxonomytype'] = ModelDescription(
    'vulnerability.taxonomytype',
    None,
    {'owner': ModelRefs('auth.user', False),})

MODELS_DESCR['vulnerability.cc_predictorvar'] = ModelDescription(
    'vulnerability.cc_predictorvar',
    None,
    {'owner': ModelRefs('auth.user', False),
     'capacity_curve_func': ModelRefs('vulnerability.capacitycurvefunc',
                                      False)},
    group="vulnerability.generalinformation")

MODELS_DESCR['vulnerability.capacitycurvefunc'] = ModelDescription(
    'vulnerability.capacitycurvefunc',
    None,
    {'owner': ModelRefs('auth.user', False),
     'general_information': ModelRefs('vulnerability.generalinformation',
                                      False)},
    group="vulnerability.generalinformation")

MODELS_DESCR['vulnerability.funcdistrdtldiscr'] = ModelDescription(
    'vulnerability.funcdistrdtldiscr',
    None,
    {'owner': ModelRefs('auth.user', False),
     'damage_to_loss_func': ModelRefs('vulnerability.damagetolossfunc', False)},
    group="vulnerability.generalinformation")

MODELS_DESCR['vulnerability.damagetolossfunc'] = ModelDescription(
    'vulnerability.damagetolossfunc',
    None,
    {'owner': ModelRefs('auth.user', False),
     'general_information': ModelRefs('vulnerability.generalinformation',
                                      False)},
    group="vulnerability.generalinformation")

MODELS_DESCR['vulnerability.funcdistrvulncont'] = ModelDescription(
    'vulnerability.funcdistrvulncont',
    None,
    {'owner': ModelRefs('auth.user', False),
     'vulnerability_func': ModelRefs('vulnerability.vulnerabilityfunc', False),
     },
    group="vulnerability.generalinformation")

MODELS_DESCR['vulnerability.funcdistrvulndiscr'] = ModelDescription(
    'vulnerability.funcdistrvulndiscr',
    None,
    {'owner': ModelRefs('auth.user', False),
     'vulnerability_func': ModelRefs('vulnerability.vulnerabilityfunc', False),
     },
    group="vulnerability.generalinformation")

MODELS_DESCR['vulnerability.evaluationofim'] = ModelDescription(
    'vulnerability.evaluationofim',
    None,
    {'owner': ModelRefs('auth.user', False),})

MODELS_DESCR['vulnerability.predictorvar'] = ModelDescription(
    'vulnerability.predictorvar',
    None,
    {'owner': ModelRefs('auth.user', False),
     'vulnerability_func': ModelRefs('vulnerability.vulnerabilityfunc', False),
     'fragility_func':     ModelRefs('vulnerability.fragilityfunc', False),
     },
    group="vulnerability.generalinformation")

MODELS_DESCR['vulnerability.vulnerabilityfunc'] = ModelDescription(
    'vulnerability.vulnerabilityfunc',
    None,
    {'owner': ModelRefs('auth.user', False),
     'general_information': ModelRefs('vulnerability.generalinformation',
                                      False),
     },
    group="vulnerability.generalinformation")

MODELS_DESCR['vulnerability.funcdistrfragcont'] = ModelDescription(
    'vulnerability.funcdistrfragcont',
    None,
    {'owner': ModelRefs('auth.user', False),
     'fragility_func':     ModelRefs('vulnerability.fragilityfunc', False),
     },
    group="vulnerability.generalinformation")

MODELS_DESCR['vulnerability.funcdistrfragdiscr'] = ModelDescription(
    'vulnerability.funcdistrfragdiscr',
    None,
    {'owner': ModelRefs('auth.user', False),
     'fragility_func':     ModelRefs('vulnerability.fragilityfunc', False),
     },
    group="vulnerability.generalinformation")

MODELS_DESCR['vulnerability.engineeringdemandpar'] = ModelDescription(
    'vulnerability.engineeringdemandpar',
    None,
    {'owner': ModelRefs('auth.user', False),})

MODELS_DESCR['vulnerability.fragilityfunc'] = ModelDescription(
    'vulnerability.fragilityfunc',
    None,
    {'owner': ModelRefs('auth.user', False),
     'general_information':    ModelRefs('vulnerability.generalinformation',
                                         False),
     },
    group="vulnerability.generalinformation")

MODELS_DESCR['vulnerability.generalinformation'] = ModelDescription(
    'vulnerability.generalinformation',
    lambda i: [ i['fields']['name'] ],
    {'owner': ModelRefs('auth.user', False),})

