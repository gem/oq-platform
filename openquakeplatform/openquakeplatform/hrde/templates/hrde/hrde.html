<!--
Copyright (c) 2014, GEM Foundation.

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as
published by the Free Software Foundation, either version 3 of the
License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with this program.  If not, see <https://www.gnu.org/licenses/agpl.html>.
-->
{% extends "data_viewer_base.html" %}

{% block extra_head %}
    {{block.super}}
    <link rel="stylesheet" href="{{ STATIC_URL }}hrde/css/hrde.css" />
    <link rel="stylesheet" href="{{ STATIC_URL }}leaflet-control-orderlayers/dist/css/leaflet.control.orderlayers.min.css">
    <link rel="stylesheet" href="{{ STATIC_URL }}css/absolute_center_spinner.css" />
{% endblock extra_head %}

{% block map_tools %}
  {{block.super}}
  {% include "base_map_options.html" %}
  <select id="supplemental-layer-menu">
    <option >Supplemental Layers </option>
      <!-- dynamic content goes here -->
  </select>

{% endblock %}

{% block title %}
HRDE - {{block.super}}
{% endblock %}

{% block body_outer %}
<div id="cover"></div>
<div id="absoluteSpinner" class="loading">Loading&#8230;</div>
<div ng-app="hrdeApp">
<div id="worning-no-layer" title="Woops!" class="ui-helper-hidden">
    <p>This layer is not loaded in the map</p>
</div>
  <div id="chartDialog" title="Plot" style="overflow: hidden;"></div>
  <div id="HMDownloadWarning" title="Whoops" style="overflow: hidden;"></div>
  <div id="legendDialog" title="Legend" style="overflow: hidden;"></div>

  {% verbatim %}
  <div id="hazardDataDialog" title="Hazard Data" style="overflow: hidden;">
    <form id="tile-form-list-curves">
      <br>Hazard Model:<br>
      <select id="hazard-curve-category"></select>
      <div id="wiki-link"></div>

      <!-- Input model dropdown -->
      <div ng-controller="HazardInputDropdown">
        <br>Input Models:<br>
        Filter <input type="text" ng-model="search">
        <br>
        <select id="input-list" size="5" ng-model="selected_input" ng-options="input.name for input in inputs | filter:search | orderBy:'name'">
          <option style="display:none" value="">select a type</option>
        </select>
        <br>
        <input type="button" id="addTileInput" value="Add Layer">
        <br>
      </div>

      <!-- Hazard Maps dropdown -->
      <div ng-controller="HazardMapDropdown">
        <br>Hazard Maps:<br>
        Filter <input type="text" ng-model="search">
        <br>
        <select size="5" id="layer-list" ng-model="selected_map" ng-options="map.name for map in maps | filter:search | orderBy:'name'">
          <option style="display:none" value="">select a type</option>
        </select>
        <br>
        <input type="button" id="addTileLayer" value="Add Layer">
        <div id="opacity-labels">
        <p>
          <label class="opacity-label" for="amount">Layer opacity:</label>
          <input type="text" id="amount" readonly style="width:30px">
        </p>
      </div>
      <div id="opacity-slider"></div>
      </div>
      <br/>

      <!-- Hazard Curve dropdown -->
      <div ng-controller="HazardCurveDropdown">
        <br>Hazard Curves:<br>
        Filter <input type="text" ng-model="search">
        <br>
        <select id="curve-list" size="5" ng-model="selected_curve" ng-options="curve.name for curve in curves | filter:search | orderBy:'name'">
          <option style="display:none" value="">select a type</option>
        </select>
        <br>
        <input type="button" id="addTileCurve" value="Add Layer">
        <br>
        <div id="hc-mixed-selection"></div><br>
      </div>

      <!-- UHS Curve dropdown -->
      <div ng-controller="UhsDropdown">
        <br>Uniform Hazard Spectra:<br>
        Filter <input type="text" ng-model="search">
        <br>
        <select id="uhs-list" size="5" ng-model="selected_uhs" ng-options="uhs.name for uhs in uhss | filter:search | orderBy:'name'">
          <option style="display:none" value="">select a type</option>
        </select>
        <br>
        <input type="button" id="addTileUhs" value="Add Layer">
        <br>
        <div id="uhs-mixed-selection"></div><br>
      </div>

      <!-- Spectrum Code dropdown -->
      <div ng-controller="SpectrumDropdown">
        <br>Hazard Spectrum Code:<br>
        Filter <input type="text" ng-model="search">
        <br>
        <select id="spectrum-list" size="5" ng-model="selected_spectrum" ng-options="spectrum.name for spectrum in spectrums | filter:search | orderBy:'name'">
          <option style="display:none" value="">select a type</option>
        </select>
        <br>
        <input type="button" id="addTileSpectrum" value="Add Layer">
        <br>
        <div id="spectrum-mixed-selection"></div><br>
      </div>
  </div>

  <div id="riskDataDialog" title="Risk Data" style="overflow: hidden;">
    <form id="risk-form-list-curves">
      <br>Risk Models:<br>
      <select id="risk-curve-category"></select>
      <!-- Risk Loss Curve dropdown -->
      <div ng-controller="RiskLossCurvesDropdown">
        <br>Loss Curves<br>
        Filter <input type="text" ng-model="search">
        <br>
        <select id="loss-list" size="5" ng-model="selected_loss" ng-options="loss.name for loss in losses | filter:search | orderBy:'name'">
          <option style="display:none" value="">select a type</option>
        </select>
        <br>
        <input type="button" id="addTileLoss" value="Add Layer">
        <br>
      </div>
    </form>
  </div>

  <div id="worning-no-layer" title="Woops!" class="ui-helper-hidden">
      <p>This layer is not loaded in the map</p>
  </div>
</div>
{% endverbatim %}
{{block.super}}
{% endblock %}


{% block extra_script %}
    {{block.super}}
    <!-- Category tags-->
    <script src="{{ STATIC_URL }}leaflet-control-orderlayers/dist/leaflet.control.orderlayers.min.js"></script>
    <script src="{{ STATIC_URL }}hrde/hrde.js"></script>
    <script src="{{ STATIC_URL }}hrde/hrde_hazard_chart_single.js"></script>
    <script src="{{ STATIC_URL }}hrde/hrde_hazard_chart_mixed.js"></script>
    <script src="{{ STATIC_URL }}hrde/hrde_input_hazard_chart.js"></script>
    <script src="{{ STATIC_URL }}hrde/hrde_loss_curve_chart.js"></script>
    <script src="{{ STATIC_URL }}hrde/hrde_spectrum_chart_mixed.js"></script>
    <script src="{{ STATIC_URL }}hrde/hrde_csv_download.js"></script>
    <script src="{{ STATIC_URL }}hrde/hrdeDrop.js"></script>
    <script src="{{ STATIC_URL }}hrde/supplemental_layer_options.js"></script>
    <script src="{{ STATIC_URL }}js/base_map_options.js"></script>
    <script>
        help=document.getElementById("help_url");
        if(typeof help !== "undefined") { help.href+='/hrde/'; }
    </script>
{% endblock extra_script %}
