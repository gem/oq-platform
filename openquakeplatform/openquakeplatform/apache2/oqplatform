WSGIDaemonProcess openquakeplatform user=www-data threads=15 processes=2
<VirtualHost *:80>
    Servername localhost
    ServerAdmin webmaster@localhost

    ErrorLog /var/log/apache2/error.log
    LogLevel warn
    CustomLog /var/log/apache2/access.log combined

    WSGIProcessGroup openquakeplatform
    WSGIPassAuthorization On
    WSGIScriptAlias / /var/www/openquake/platform/wsgi.py
    WSGIApplicationGroup %{GLOBAL}

    <Directory "/var/www/openquake/platform/">
       Order allow,deny
        Options -Indexes FollowSymLinks
        Allow from all
    </Directory>

    Alias /static/ /var/www/openquake/platform/static/
    Alias /uploaded/ /var/www/openquake/platform/uploaded/
    Alias /robots.txt /var/www/openquake/platform/robots.txt

    <Directory "/var/www/openquake/platform/uploaded/documents/">
       Order allow,deny
       Deny from all
    </Directory>

    <Proxy *>
      Order allow,deny
      Allow from all
    </Proxy>

    ProxyPreserveHost On
    ProxyPass /geoserver http://localhost:8080/geoserver
    ProxyPassReverse /geoserver http://localhost:8080/geoserver
</VirtualHost>
